<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aashi's Professional Portfolio - Neon Theme</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* --- CSS STYLING (Updated with Instagram and better command display) --- */
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

        :root {
            --neon-color-purple: #8A2BE2;
            --neon-color-orange: #FF8C00;
            --dark-bg: #1a0332;
            --card-bg: #290850;
            --text-color: #ffffff;
            --shadow-purple: 0 0 5px var(--neon-color-purple), 0 0 15px var(--neon-color-purple);
            --shadow-orange: 0 0 5px var(--neon-color-orange), 0 0 15px var(--neon-color-orange);
            --google-blue: #4285F4;
            --insta-pink: #E1306C;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background-color: var(--dark-bg);
            color: var(--text-color);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 20px 0;
        }

        .neon-text {
            color: var(--text-color);
            text-shadow: var(--shadow-purple);
        }

        .neon-border {
            border: 2px solid var(--neon-color-purple);
            background: rgba(41, 8, 80, 0.4);
            box-shadow: 0 0 10px var(--neon-color-purple), 0 0 20px rgba(138, 43, 226, 0.5);
            transition: all 0.3s ease;
            border-radius: 15px;
            padding: 20px;
        }

        /* --- Profile Card --- */
        .profile-card {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            padding: 30px;
            position: relative;
        }

        .profile-info h1 {
            font-size: 3.5em;
            margin: 0;
        }

        .profile-info p {
            font-size: 1.2em;
            opacity: 0.8;
            margin-bottom: 10px;
        }

        .profile-image {
            position: relative;
            cursor: pointer;
        }

        .profile-image img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--neon-color-purple);
            box-shadow: 0 0 15px var(--neon-color-purple), 0 0 30px rgba(138, 43, 226, 0.7);
            display: block;
        }

        #upload-icon {
            position: absolute;
            bottom: 0;
            right: 0;
            background: var(--neon-color-orange);
            color: white;
            border-radius: 50%;
            padding: 8px;
            font-size: 1em;
            box-shadow: 0 0 10px var(--neon-color-orange);
            transition: all 0.2s;
        }

        #upload-icon:hover {
            transform: scale(1.1);
        }

        .social-link {
            color: var(--text-color);
            text-decoration: none;
            font-size: 1.2em;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: color 0.3s;
        }

        .social-link i {
            color: var(--insta-pink);
            text-shadow: 0 0 5px var(--insta-pink);
        }

        .social-link:hover {
            color: var(--insta-pink);
        }


        /* --- Login/Logout Display Area --- */
        #auth-status {
            position: absolute;
            top: 20px;
            right: 20px;
            text-align: right;
            font-size: 0.9em;
        }

        #login-button {
            background-color: var(--google-blue);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 10px;
            box-shadow: 0 0 10px rgba(66, 133, 244, 0.5);
            transition: background-color 0.3s;
        }

        #login-button:hover {
            background-color: #357ae8;
        }

        #logout-button {
            background-color: #8B0000;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8em;
            margin-left: 10px;
            display: none;
        }

        /* --- Rating Section --- */
        .rating-section {
            text-align: center;
            padding: 40px 20px;
            margin-top: 40px;
        }

        .stars i.selected,
        .stars i:hover {
            color: var(--neon-color-orange);
            text-shadow: var(--shadow-orange);
        }

        #submit-rating {
            padding: 12px 30px;
            font-size: 1.1em;
        }

        #rating-message {
            min-height: 20px;
            font-style: italic;
            margin-bottom: 15px;
        }

        /* Remaining CSS for Skills/Projects is unchanged */
        .grid-section {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 40px;
        }

        .projects-section {
            grid-template-columns: 1fr 1fr;
        }

        .commands p {
            background: #4B0082;
            padding: 8px 12px;
            margin: 8px 0;
            border-radius: 5px;
            font-family: monospace;
            font-size: 0.95em;
            overflow-x: auto;
        }

        .neon-button {
            background: var(--neon-color-purple);
            color: var(--text-color);
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            text-transform: uppercase;
            font-weight: 600;
            box-shadow: 0 0 5px var(--neon-color-purple);
            transition: all 0.3s ease;
            width: 100%; /* Make menu buttons fill width */
            margin-bottom: 10px;
        }

        .neon-button:hover,
        .neon-button:active {
            background: var(--neon-color-orange);
            box-shadow: var(--shadow-orange);
            transform: scale(1.01);
        }

        .neon-button.active {
            background: var(--neon-color-orange);
            box-shadow: var(--shadow-orange);
        }
        
        .menu-card {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .stars {
            font-size: 2.5em;
            margin-bottom: 15px;
            display: flex;
            justify-content: center;
            gap: 5px;
        }

        .stars i {
            color: #4a4a4a;
            cursor: pointer;
            transition: all 0.2s;
        }

        .skill-card h2 {
            margin-bottom: 15px;
        }

        .close-btn {
            margin-top: 15px;
            width: auto;
            padding: 10px 20px;
            display: inline-block;
        }

        /* Theme Toggle placeholder style */
        #theme-toggle {
            position: absolute;
            top: 20px;
            right: 200px;
            padding: 5px 10px;
            background: var(--neon-color-orange);
            border-radius: 50px;
            font-size: 0.7em;
            width: 30px;
            height: 30px;
            cursor: pointer;
        }
    </style>

</head>

<body>
    <div class="container">
        <header class="profile-card neon-border">
            <div class="profile-info">
                <h1>Hello, I'm <span class="neon-text">Aashi</span></h1>
                <p>Linux Automation Engineer</p>
                <a href="https://ig.me/m/aashi__guleria" target="_blank" class="social-link">
                    <i class="fab fa-instagram"></i> aashi__guleria (DM Me!)
                </a>
            </div>
            <div class="profile-image" id="profile-image-container">
                <img id="aashi.jpg" src="https://via.placeholder.com/150/8A2BE2/FFFFFF?text=Aashi"
                    alt="Aashi's Profile Picture">
                <i class="fas fa-camera" id="upload-icon" title="Upload your picture"></i>
                <input type="file" id="image-upload" accept="image/*" style="display: none;">
                </div>
            <div id="auth-status">
                <p id="user-display">Please Login to Rate.</p>
                <button id="login-button"><i class="fab fa-google"></i> Login with Google</button>
                <button id="logout-button">Logout</button>
            </div>
            <div style="position: absolute; top: 30px; right: 200px; display: flex; align-items: center;">
                <span style="font-size: 0.9em; margin-right: 5px;">Dark</span>
                <button id="theme-toggle" class="neon-button"
                    style="padding: 5px; border-radius: 50%; width: 30px; height: 30px;"></button>
            </div>

        </header>

        <section class="grid-section">
            <div class="skill-card neon-border" id="command-display-card">
                <h2 id="command-title">Select a Skill</h2>
                <div class="commands" id="commands-content">
                    <p>Click any skill from the menu to see its associated Linux commands.</p>
                    <button class="neon-button close-btn" id="close-commands" style="display: none;">Close</button>
                </div>
            </div>

            <div class="skill-card neon-border menu-card" id="skill-menu">
                <button class="menu-btn neon-button" data-skill="User">User</button>
                <button class="menu-btn neon-button" data-skill="Group Gama.">Group Gama.</button>
                <button class="menu-btn neon-button active" data-skill="File Permissions">File Permissions</button>
                <button class="menu-btn neon-button" data-skill="Cron">Cron</button>
                <button class="menu-btn neon-button" data-skill="Firewall">Firewall</button>
                <button class="menu-btn neon-button" data-skill="Networking">Networking</button>
                <button class="menu-btn neon-button" data-skill="YUM / DNF / RPM">YUM / DNF / RPM</button>
                <button class="menu-btn neon-button" data-skill="Local">Local</button>
            </div>
        </section>

        <section class="grid-section projects-section">
            <div class="project-card neon-border">
                <h2>Projects</h2>
                <ul>
                    <li>✅ Linux automation scripts for backups, cron & monitoring.</li>
                </ul>
                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <i class="fas fa-circle" style="color: var(--neon-color-purple);"></i>
                    <i class="fas fa-user-lock" style="color: var(--neon-color-purple);"></i>
                </div>
            </div>

            <div class="project-card neon-border project-menu" id="project-menu">
                <button class="menu-btn neon-button" data-skill="User Permissions">User Permissions</button>
                <button class="menu-btn neon-button" data-skill="Group Management">Group Management</button>
                <button class="menu-btn neon-button" data-skill="Cron Jobs">Cron Jobs</button>
            </div>
        </section>

        <hr style="border-color: rgba(138, 43, 226, 0.3); margin: 40px 0;">

        <section class="rating-section neon-border">
            <h2 class="neon-text">Rate Aashi!</h2>

            <div class="stars" id="rating-stars"></div>

            <p id="rating-message"></p>

            <button id="submit-rating" class="neon-button" disabled>
                Submit Rating
            </button>

            <div class="rating-info">
                <span id="avg-rating">Average Rating: 0.0 / 5.0</span>
                <span id="user-count">(0 users rated)</span>
            </div>
        </section>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>

    <script>
        // --- JAVASCRIPT LOGIC (Updated for all features) ---

        // 1. Firebase Configuration - *IMPORTANT: REPLACE with your actual config*
        const firebaseConfig = {
            apiKey: "AIzaSyC2dE_FAKE_API_KEY", // <--- ⚠️ अपनी असली API Key यहाँ डालें
            authDomain: "aashi-portfolio-12345.firebaseapp.com", // <--- ⚠️ अपनी असली Auth Domain यहाँ डालें
            databaseURL: "https://aashi-portfolio-12345-default-rtdb.firebaseio.com", // ⚠️ अपनी असली Database URL यहाँ डालें
            projectId: "aashi-portfolio-12345", // <--- ⚠️ अपनी असली Project ID यहाँ डालें
            storageBucket: "aashi-portfolio-12345.appspot.com", // ⚠️ अपनी असली Storage Bucket यहाँ डालें
        };

        // Initialize Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }

        // Firebase Services
        const auth = firebase.auth();
        const database = firebase.database();
        const storage = firebase.storage();
        const ratingsRef = database.ref('aashi_portfolio_ratings');

        // UI Elements
        const starsContainer = document.getElementById('rating-stars');
        const submitButton = document.getElementById('submit-rating');
        const avgRatingSpan = document.getElementById('avg-rating');
        const userCountSpan = document.getElementById('user-count');
        const message = document.getElementById('rating-message');
        const loginButton = document.getElementById('login-button');
        const logoutButton = document.getElementById('logout-button');
        const userDisplay = document.getElementById('user-display');
        const themeToggle = document.getElementById('theme-toggle');
        const skillMenu = document.getElementById('skill-menu');
        const projectMenu = document.getElementById('project-menu');
        const commandDisplayCard = document.getElementById('command-display-card');
        const commandTitle = document.getElementById('command-title');
        const commandsContent = document.getElementById('commands-content');
        const closeCommandsButton = document.getElementById('close-commands');
        const profilePic = document.getElementById('profile-pic');
        const imageUpload = document.getElementById('image-upload');
        const uploadIcon = document.getElementById('upload-icon');


        let userSelectedRating = 0;
        let currentUser = null;

        // --- DATA: Linux Commands for the Skills Menu ---
        const skillCommands = {
            "File Permissions": [
                "chmod 755 g.txt (Set rwx for owner, rx for group/others)",
                "chmod 600 secret.txt (Set rw for owner only)",
                "chmod +x script.sh (Add execute permission)",
                "chown root:root file (Change owner and group to root)",
                "getfacl file (View extended ACLs)"
            ],
            "User": [
                "useradd newuser (Create a new user)",
                "passwd newuser (Set password for newuser)",
                "usermod -aG sudo newuser (Add user to sudo group)",
                "userdel -r olduser (Delete user and home directory)",
                "id username (Display user identity)"
            ],
            "Group Gama.": [
                "groupadd newgroup (Create a new group)",
                "groupdel oldgroup (Delete a group)",
                "usermod -g newgroup username (Change user's primary group)",
                "gpasswd -a user group (Add user to a supplementary group)",
                "groups username (Display groups a user belongs to)"
            ],
            "Cron": [
                "crontab -e (Edit user's crontab file)",
                "crontab -l (Display user's crontab file)",
                "systemctl status cron (Check cron service status)",
                "*/5 * * * * command (Run command every 5 minutes)"
            ],
            "Firewall": [
                "firewall-cmd --list-all (Check all firewall settings)",
                "firewall-cmd --add-port=80/tcp --permanent (Open port 80 permanently)",
                "firewall-cmd --reload (Apply permanent changes)",
                "iptables -L (List current iptables rules)"
            ],
            "Networking": [
                "ip a (Show network interfaces and addresses)",
                "ss -tuln (List listening ports and connections)",
                "ping google.com (Test network connectivity)",
                "netstat -rn (Show routing table)",
                "hostname -I (Show all IP addresses)"
            ],
            "YUM / DNF / RPM": [
                "yum install package (Install package)",
                "dnf update (Update all packages)",
                "rpm -ivh package.rpm (Install local RPM file)",
                "yum search keyword (Search for packages)",
                "dnf remove package (Remove package)"
            ],
            "Local": [
                "ls -lart (List files in long format, all, reverse time sort)",
                "cat file.txt (Display file content)",
                "grep 'pattern' file.txt (Search for pattern in file)",
                "history (Show command history)",
                "df -h (Display disk space usage)"
            ],
            "User Permissions": [
                "sudo visudo (Edit sudoers file)",
                "su - username (Switch user)",
                "whoami (Print effective userid)",
                "chmod u+s executable (Set SUID bit)"
            ],
            "Group Management": [
                "chgrp newgroup file (Change file group)",
                "newgrp groupname (Temporarily change current group)",
                "id -G (Show only group IDs)"
            ],
            "Cron Jobs": [
                "ls /etc/cron.d/ (List system cron jobs)",
                "touch /etc/cron.allow (Control crontab access)",
                "mail (Check for cron job output via mail)"
            ]
        };

        // --- COMMAND DISPLAY LOGIC ---
        function displayCommands(skillName) {
            const commands = skillCommands[skillName] || ["No commands available for this skill yet."];
            commandTitle.textContent = skillName;
            commandsContent.innerHTML = '';
            
            commands.forEach(cmd => {
                const p = document.createElement('p');
                p.textContent = cmd;
                commandsContent.appendChild(p);
            });
            
            const closeBtn = document.createElement('button');
            closeBtn.className = 'neon-button close-btn';
            closeBtn.textContent = 'Close';
            closeBtn.addEventListener('click', () => {
                 commandTitle.textContent = "Select a Skill";
                 commandsContent.innerHTML = '<p>Click any skill from the menu to see its associated Linux commands.</p>';
                 document.querySelectorAll('.menu-btn').forEach(btn => btn.classList.remove('active'));
            });
            commandsContent.appendChild(closeBtn);
        }
        
        // Initial display
        displayCommands("File Permissions");
        
        // Event listeners for all menu buttons
        [...skillMenu.querySelectorAll('.menu-btn'), ...projectMenu.querySelectorAll('.menu-btn')].forEach(button => {
            button.addEventListener('click', (e) => {
                const skillName = e.target.dataset.skill;
                displayCommands(skillName);
                
                // Active button highlighting
                document.querySelectorAll('.menu-btn').forEach(btn => btn.classList.remove('active'));
                e.target.classList.add('active');
            });
        });


        // --- AUTHENTICATION LOGIC ---

        // 1. Google Login Handler
        loginButton.addEventListener('click', () => {
            const provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider)
                .then((result) => {
                    // Login successful, onAuthStateChanged will handle the rest
                })
                .catch((error) => {
                    console.error("Google login error:", error);
                    alert("Login failed: " + error.message);
                });
        });

        // 2. Logout Handler
        logoutButton.addEventListener('click', () => {
            auth.signOut().then(() => {
                // Logged out successfully
            }).catch((error) => {
                console.error("Logout error:", error);
            });
        });

        // 3. User State Change Listener (Most Important for Auth)
        auth.onAuthStateChanged((user) => {
            currentUser = user;

            if (user) {
                // User is logged in
                userDisplay.innerHTML = `Welcome, <b>${user.displayName.split(' ')[0]}</b>!`;
                loginButton.style.display = 'none';
                logoutButton.style.display = 'inline';
                message.textContent = "Select stars and click 'Submit Rating'.";

                // Check if user has already rated
                checkIfUserRated(user.uid);
                // Load profile picture if one exists in storage
                loadProfilePicture(user.uid);

            } else {
                // User is logged out
                userDisplay.textContent = "Please Login to Rate.";
                loginButton.style.display = 'block';
                logoutButton.style.display = 'none';
                submitButton.disabled = true;
                submitButton.textContent = "Submit Rating";
                message.textContent = "";
                // Reset UI
                updateStarDisplay(0, true);
                userSelectedRating = 0; // Reset selected rating
            }
        });

        // 4. Check if User Has Already Rated
        function checkIfUserRated(uid) {
            database.ref('user_ratings_status/' + uid).once('value')
                .then((snapshot) => {
                    if (snapshot.exists()) {
                        // User has rated
                        submitButton.disabled = true;
                        submitButton.textContent = "You Have Already Rated!";
                        message.textContent = "Thank you for your rating!";
                        const userRating = snapshot.val().rating;
                        updateStarDisplay(userRating, true);
                        userSelectedRating = userRating;
                    } else {
                        // User can rate
                        submitButton.disabled = false;
                        submitButton.textContent = "Submit Rating";
                        message.textContent = "Select stars and click 'Submit Rating'.";
                    }
                });
        }

        // --- RATING STAR FUNCTIONALITY & FIREBASE INTEGRATION ---
        for (let i = 1; i <= 5; i++) {
            const star = document.createElement('i');
            star.className = 'fas fa-star';
            star.dataset.rating = i;
            starsContainer.appendChild(star);

            star.addEventListener('click', () => {
                if (!currentUser || submitButton.disabled) return;
                userSelectedRating = i;
                updateStarDisplay(i, true);
                message.textContent = `You have selected: ${i} Stars. Ready to submit.`;
            });

            star.addEventListener('mouseover', () => {
                if (!currentUser || submitButton.disabled) return;
                updateStarDisplay(i, false);
            });

            star.addEventListener('mouseout', () => {
                if (!currentUser || submitButton.disabled) return;
                updateStarDisplay(userSelectedRating, true);
            });
        }

        function updateStarDisplay(rating, persist) {
            const stars = starsContainer.querySelectorAll('i');
            stars.forEach(star => {
                const starRating = parseInt(star.dataset.rating);
                if (starRating <= rating) {
                    star.classList.add('selected');
                } else {
                    star.classList.remove('selected');
                }
            });
        }


        // 5. Handle Rating Submission
        submitButton.addEventListener('click', () => {
            if (!currentUser) {
                alert("Please log in with Google first to submit a rating!");
                return;
            }
            if (userSelectedRating === 0) {
                message.textContent = "Please select a star rating first!";
                return;
            }
            if (submitButton.disabled) return;

            submitButton.disabled = true;
            submitButton.textContent = "Submitting...";

            const ratingData = {
                rating: userSelectedRating,
                timestamp: firebase.database.ServerValue.TIMESTAMP,
                userName: currentUser.displayName,
                userEmail: currentUser.email,
                userUID: currentUser.uid,
            };

            // 1. Push rating to the main list (aashi_portfolio_ratings)
            ratingsRef.push(ratingData)
                .then(() => {
                    // 2. Save user's rating status (user_ratings_status) to prevent repeat ratings
                    return database.ref('user_ratings_status/' + currentUser.uid).set({
                        rating: userSelectedRating,
                        timestamp: firebase.database.ServerValue.TIMESTAMP,
                        email: currentUser.email
                    });
                })
                .then(() => {
                    // Success Message & UI Update
                    message.textContent = `Your rating of ${userSelectedRating} stars submitted! Thank you!`;
                    submitButton.textContent = "Rating Submitted!";
                    submitButton.style.backgroundColor = 'gray';

                    // Simulating a temporary "popup" effect
                    submitButton.style.boxShadow = '0 0 20px #22ff22';
                    setTimeout(() => submitButton.style.boxShadow = '0 0 5px var(--neon-color-purple)', 2000);
                })
                .catch(error => {
                    console.error("Error submitting rating: ", error);
                    message.textContent = "Error submitting rating. Check console.";
                    submitButton.disabled = false;
                    submitButton.textContent = "Submit Rating (Error)";
                });
        });


        // 6. Live Rating Calculation and Display
        ratingsRef.on('value', (snapshot) => {
            let totalRating = 0;
            let count = 0;

            if (snapshot.exists()) {
                snapshot.forEach((childSnapshot) => {
                    const ratingData = childSnapshot.val();
                    if (ratingData && ratingData.rating) {
                        totalRating += ratingData.rating;
                        count++;
                    }
                });
            }

            const avgRating = count > 0 ? (totalRating / count).toFixed(1) : "0.0";

            avgRatingSpan.textContent = `Average Rating: ${avgRating} / 5.0`;
            userCountSpan.textContent = `(${count} users rated)`;
        });

        // 7. Profile Picture Upload/Storage Logic
        uploadIcon.addEventListener('click', () => {
            if (!currentUser) {
                alert("Please log in with Google to upload a profile picture!");
                return;
            }
            imageUpload.click(); // Trigger the hidden file input
        });

        imageUpload.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (!file) return;

            if (file.size > 2 * 1024 * 1024) { // Limit size to 2MB
                alert("File size must be less than 2MB.");
                return;
            }

            if (!file.type.startsWith('image/')) {
                alert("Please upload an image file.");
                return;
            }

            const userId = currentUser.uid;
            const storageRef = storage.ref(`profile_pictures/${userId}/${file.name}`);
            const uploadTask = storageRef.put(file);
            
            alert("Uploading picture...");

            uploadTask.on('state_changed',
                (snapshot) => {
                    // Optional: show progress bar
                    const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                    console.log('Upload is ' + progress.toFixed(0) + '% done');
                },
                (error) => {
                    console.error("Upload error:", error);
                    alert("Upload failed. Check console for details.");
                },
                () => {
                    // Upload complete, get the download URL
                    uploadTask.snapshot.ref.getDownloadURL().then((downloadURL) => {
                        // 1. Update the image source on the page
                        profilePic.src = downloadURL;
                        
                        // 2. Save the URL to the user's database profile (Optional but recommended)
                        database.ref('users/' + userId).set({
                            profile_pic_url: downloadURL,
                            displayName: currentUser.displayName,
                            email: currentUser.email
                        }).then(() => {
                            alert("Profile picture uploaded and updated successfully!");
                        }).catch(err => {
                             alert("Picture uploaded, but failed to save URL in database: " + err.message);
                        });
                    });
                }
            );
        });

        function loadProfilePicture(userId) {
            // Check the database for a saved URL first
            database.ref('users/' + userId + '/profile_pic_url').once('value', (snapshot) => {
                const url = snapshot.val();
                if (url) {
                    profilePic.src = url;
                } else {
                    // If no custom URL, use a default from user.photoURL if available
                     if (currentUser && currentUser.photoURL) {
                        profilePic.src = currentUser.photoURL;
                     }
                }
            });
        }

        // 8. Theme Toggle (Placeholder)
        themeToggle.addEventListener('click', () => {
            alert("Theme toggle functionality is a placeholder. The current 'Dark Mode' theme is applied by default.");
        });


        // Initial setup
        updateStarDisplay(0, true);
    </script>

</body>

</html>
