<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Aashi Guleria | Portfolio (Professional)</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>

<style>
:root{
/* DARK MODE COLORS */
--bg:#081124;
--text:#e6f0ff;
--muted:#b5c8e6;
--card:rgba(255,255,255,0.05);
--skillBlue:#1565ff;
--skillHover:#ff8b00;
/* New Rating Colors */
--starDefault: #444;
--starSelected: #ffc107; /* Yellow */
}

/* LIGHT MODE OVERRIDE */
.light {
--bg:#ffffff;
--text:#000000;
--muted:#444444;
--card:#f0f4ff;
--skillBlue:#3c82ff;
--starDefault: #ccc;
}

/* MAIN STYLES */
html,body{
height:100%;
margin:0;
font-family:Poppins;
background:var(--bg);
color:var(--text);
}

.wrap{max-width:980px;margin:25px auto;padding:15px;}

header{
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:15px;
}

.mode-btn{
padding:8px 16px;
border-radius:40px;
border:1px solid rgba(255,255,255,0.2);
background:rgba(255,255,255,0.1);
color:var(--text);
cursor:pointer;
}

.hero{
padding:30px;
text-align:center;
background:var(--card);
border-radius:15px;
}

.avatar{
width:140px;height:140px;border-radius:50%;
border:4px solid rgba(74,163,255,0.4);
}

.name{font-size:28px;font-weight:700;margin-top:10px;}
.name span{color:#4aa3ff;}

.animated-role{color:var(--muted);font-weight:600;}
.cursor{display:inline-block;width:4px;height:16px;background:#4aa3ff;margin-left:4px;animation:blink .7s infinite;}

@keyframes blink{
0%{opacity:1;}50%{opacity:0;}100%{opacity:1;}
}

.btn{
padding:10px 20px;margin:8px;border-radius:12px;font-size:15px;
border:0;color:#fff;cursor:pointer;
}
.github{background:#0d8bff;}
.ig{background:#ff7aa6;}

.card{
background:var(--card);
padding:18px;
border-radius:12px;
margin-top:20px;
}

.skills-grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
gap:14px;
}

.skill{
background:var(--skillBlue);
padding:14px;
color:#fff;
text-align:center;
border-radius:10px;
font-weight:600;
cursor:pointer;
transition:.3s;
}
.skill:hover{
background:var(--skillHover);
transform:translateY(-4px);
}

/* 5-STAR RATING STYLES */
.rating-area {
margin-top: 15px;
text-align: center;
}
.rating-stars {
font-size: 30px;
cursor: pointer;
color: var(--starDefault);
}
.rating-stars:hover {
color: var(--starSelected);
}
.rating-result {
margin-top: 8px;
font-size: 16px;
font-weight: 600;
}
.rating-message {
color: #4CAF50;
margin-top: 10px;
font-weight: 600;
}


/* MODAL */
#modalBack{
position:fixed;inset:0;background:rgba(0,0,0,0.6);
display:none;align-items:center;justify-content:center;
z-index: 1000; /* Ensure modal is on top */
}

#modal{
background:#111;padding:20px;border-radius:12px;max-width:850px;width:100%;
color:#fff;
}

pre{
background:#000;padding:12px;border-radius:8px;color:#cce6ff;
max-height:350px;overflow:auto;
white-space: pre-wrap; /* For better command display */
}

.modal-close{
padding:8px 16px;background:#0d8bff;border-radius:10px;color:#fff;border:0;cursor:pointer;
}

</style>
</head>
<body>

<div class="wrap">

<header>
<h1>Aashi Guleria â€” Portfolio</h1>
<button id="modeBtn" class="mode-btn">ðŸŒ™ Dark</button>
</header>

<div class="hero">
<img src="aashi.jpg" class="avatar">
<div class="name">Hello, I'm <span>Aashi</span></div>

<div class="role-wrap">
<div id="roleText" class="animated-role"></div>
</div>

<div class="buttons">
<a href="https://github.com/aashiguleria07"><button class="btn github">GitHub</button></a>
<a href="https://ig.me/m/aashi__guleria" target="_blank"><button class="btn ig">Instagram DM</button></a>
</div>
</div>


<div class="card">
<h3>About Me</h3>
<p style="color:var(--muted);">
I am <b>Aashi Guleria</b>, a passionate Linux Administrator (RHEL 9).<br>
<b>Contact:</b> 9805427313 â€” <b>Email:</b> guleriaaashi@gmail.com
</p>
</div>

<div class="card">
<h3>My Skills</h3>
<div class="skills-grid">
<div class="skill" data-key="user">User Management</div>
<div class="skill" data-key="group">Group Management</div>
<div class="skill" data-key="perm">File Permissions</div>
<div class="skill" data-key="cron">Cron Jobs</div>
<div class="skill" data-key="firewall">Firewall</div>
<div class="skill" data-key="network">Networking</div>
<div class="skill" data-key="pkg">YUM / DNF / RPM</div>
<div class="skill" data-key="repo">Local Repository</div>
<div class="skill" data-key="monitor">Monitoring</div>
</div>
</div>

<div class="card">
<h3>Projects</h3>
<p style="color:var(--muted);">âœ” Linux automation scripts for backups, cron & monitoring.</p>

<div class="rating-area">
<div style="font-size: 18px; font-weight: 600; margin-bottom: 10px;">Rate My Portfolio</div>
<div id="ratingStars">
<span class="rating-stars" data-value="1">â˜…</span>
<span class="rating-stars" data-value="2">â˜…</span>
<span class="rating-stars" data-value="3">â˜…</span>
<span class="rating-stars" data-value="4">â˜…</span>
<span class="rating-stars" data-value="5">â˜…</span>
</div>
<div id="ratingMessage" class="rating-message" style="display:none;">Thank you for rating!</div>
<div id="averageRating" class="rating-result" style="color:var(--skillHover);">Current Average Rating: Loading...</div>
</div>
</div>

<footer style="color:var(--muted);text-align:center;">Click any skill to view commands.</footer>

</div>

<div id="modalBack">
<div id="modal">
<h2 id="modalTitle">Commands</h2>
<pre id="cmdsArea"></pre>
<button class="modal-close" id="closeModal">Close</button>
</div>
</div>

<script>
// =======================================================
// ðŸš€ NEW: FIREBASE CONFIGURATION AND RATING LOGIC
// =======================================================

// 1. Firebase Configuration
const firebaseConfig = {
    apiKey: "AIzaSyDvpCiokWNDxzg9gfkCjWIkU9bfljoULd8",
    authDomain: "aashi-portfolio-b1970.firebaseapp.com",
    projectId: "aashi-portfolio-b1970",
    storageBucket: "aashi-portfolio-b1970.appspot.com",
    messagingSenderId: "1227537828",
    appId: "1:1227537828:web:cf652bfa886039cb5531",
    databaseURL: "https://aashi-portfolio-b1970-default-rtdb.asia-southeast1.firebaseio.com"
};

// 2. Initialize Firebase
const app = firebase.initializeApp(firebaseConfig);
const database = firebase.database();
const ratingsRef = database.ref('portfolioRatings');
const starElements = document.querySelectorAll('.rating-stars'); // Get stars once
let userRated = false; // To prevent multiple ratings from the same session/load
let userRatingValue = 0; // To store the rating value after a successful click

// Helper to set star colors based on a value
function setStarColors(value) {
    starElements.forEach((s, index) => {
        if (index < value) {
            s.style.color = 'var(--starSelected)';
        } else {
            s.style.color = 'var(--starDefault)';
        }
    });
}

// 3. Function to save rating to Firebase
function saveRating(rating) {
    if (userRated) return; // Already rated

    // Generate a unique key for the new rating
    const newRatingRef = ratingsRef.push();
    newRatingRef.set({
        rating: rating,
        timestamp: Date.now()
    }).then(() => {
        console.log("Rating saved successfully:", rating);
        document.getElementById('ratingMessage').style.display = 'block';
        userRated = true; // Mark as rated
        // Disable stars after rating
        starElements.forEach(star => {
            star.style.cursor = 'default';
        });
    }).catch(error => {
        console.error("Error saving rating:", error);
    });
}

// 4. Function to get and calculate average rating from Firebase
function getAverageRating() {
    ratingsRef.on('value', (snapshot) => {
        const ratingsData = snapshot.val();
        let totalRatings = 0;
        let sumOfRatings = 0;

        if (ratingsData) {
            Object.values(ratingsData).forEach(entry => {
                sumOfRatings += entry.rating;
                totalRatings++;
            });
        }

        const avg = totalRatings > 0 ? (sumOfRatings / totalRatings).toFixed(2) : 'N/A';
        const avgText = totalRatings > 0 ? ${avg} out of 5 (${totalRatings} votes) : 'Be the first to rate!';
        
        document.getElementById('averageRating').innerText = Current Average Rating: ${avgText};

        // Fill stars based on average rating (for display) - ONLY if the user hasn't rated yet
        if (!userRated) {
            const roundedAvg = Math.round(avg);
            setStarColors(roundedAvg);
        }

    }, (error) => {
        console.error("Error fetching ratings:", error);
        document.getElementById('averageRating').innerText = 'Error loading rating.';
    });
}

// 5. Rating interaction logic (Updated)
starElements.forEach(star => {
    // Hover effect
    star.addEventListener('mouseover', function() {
        if (userRated) return; // If already rated, stop hover effect
        const value = parseInt(this.dataset.value);
        setStarColors(value);
    });

    // Reset on mouseout
    star.addEventListener('mouseout', function() {
        if (userRated) {
            // If rated, show the user's selected rating permanently
            setStarColors(userRatingValue);
        } else {
            // Otherwise, reset to default (load average rating again)
            getAverageRating(); 
        }
    });

    // Click to save rating
    star.addEventListener('click', function() {
        if (userRated) return;
        const rating = parseInt(this.dataset.value);
        userRatingValue = rating; // Store the clicked rating
        
        // Visually fill the clicked rating permanently
        setStarColors(rating);

        saveRating(rating);
    });
});

// Load the current average rating when the page loads
getAverageRating();


// =======================================================
// ðŸ’» EXISTING CODE (Modified for fixes)
// =======================================================

// Fix 1: Define Modal Elements for Skill Commands to work
const modalBack = document.getElementById('modalBack');
const closeModal = document.getElementById('closeModal');

// commands updated with 5 commands each
const commands={
user:`1. useradd <username>
2. passwd <username>
3. id <username>
4. usermod -aG wheel <username>
5. userdel -r <username>`,

group:`1. groupadd <groupname>
2. groupdel <groupname>
3. gpasswd -a <user> <group> (Add user)
4. gpasswd -d <user> <group> (Remove user)
5. cat /etc/group | grep <group>`,

perm:`1. chmod 755 <file>
2. chmod 700 <dir>
3. chown <user>:<group> <file>
4. setfacl -m u:<user>:rwx <file>
5. getfacl <file>`,

cron:`1. crontab -e
2. crontab -l
3. systemctl restart crond
4. echo "0 3 * * * /path/to/script" >> /etc/crontab
5. systemctl status crond`,

firewall:`1. firewall-cmd --state
2. firewall-cmd --add-port=80/tcp --permanent
3. firewall-cmd --reload
4. firewall-cmd --list-all
5. firewall-cmd --remove-port=80/tcp --permanent`,

network:`1. ip a (Show addresses)
2. nmcli device status
3. nmcli con up <interface>
4. ping google.com -c 4
5. ss -tulnp (View open ports)`,

pkg:`1. dnf install <package> -y
2. dnf remove <package> -y
3. dnf update -y
4. rpm -qa | grep <package>
5. dnf history`,

repo:`1. mkdir /repo_local
2. createrepo /repo_local
3. vim /etc/yum.repos.d/local.repo
4. dnf clean all
5. dnf repolist`,

monitor:`1. top (Process monitoring)
2. htop (Interactive process viewer)
3. df -h (Disk usage)
4. free -m (Memory usage)
5. systemctl list-units --failed`
};


// modal
document.querySelectorAll(".skill").forEach(s=>{
s.onclick=()=>{
document.getElementById("modalTitle").innerText=s.innerText+" Commands";
document.getElementById("cmdsArea").innerText=commands[s.dataset.key];
modalBack.style.display="flex"; // Now modalBack is defined and works
};
});
closeModal.onclick=()=>modalBack.style.display="none"; // Now closeModal is defined and works


// Fix 2: Dark/Light Mode fixed
let light = document.body.classList.contains("light"); // Check initial state (should be dark by default)
const modeBtn = document.getElementById("modeBtn");

// Set initial button text based on default dark mode
if (!light) {
    modeBtn.innerText = "â˜€ Light";
} else {
    modeBtn.innerText = "ðŸŒ™ Dark";
}

modeBtn.onclick = () => {
    light = !light;

    if(light){
        document.body.classList.add("light");
        modeBtn.innerText = "ðŸŒ™ Dark";
    } else {
        document.body.classList.remove("light");
        modeBtn.innerText = "â˜€ Light";
    }
};

// Role text animation
const roles=["Linux Administrator â€¢ RHEL 9","Shell Scripting Expert","Linux Automation Engineer"];
let i=0,j=0,isDel=false;
const roleText = document.getElementById('roleText'); // Define roleText

function type(){
let t=roles[i];
if(!isDel){
roleText.innerHTML=t.substring(0,j)+'<span class="cursor"></span>';
j++;
if(j==t.length){setTimeout(()=>isDel=true,700);}
}
else{
roleText.innerHTML=t.substring(0,j)+'<span class="cursor"></span>';
j--;
if(j==0){isDel=false;i=(i+1)%roles.length;}
}
setTimeout(type,80);
}
type();
</script>

</body>
</html>
